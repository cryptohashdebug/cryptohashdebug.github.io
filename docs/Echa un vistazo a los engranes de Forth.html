<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Forth, Descendiendo a las Profundidades</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="cryptohashdebug">

    <!-- Le styles -->
    <link rel="stylesheet" href="/theme/css/bootstrap.dark.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="/theme/css/bootstrap-responsive.dark.css" rel="stylesheet">
    <link href="/theme/css/font-awesome.css" rel="stylesheet">
    <link href="/theme/css/pygments.css" rel="stylesheet">
    <link href="/static/css/personal.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/theme/images/apple-touch-icon-114x114.png">

    <link href="/" type="application/atom+xml" rel="alternate" title="Entorno Digital. ATOM Feed" />
    
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/index.html">Entorno Digital. </a>
          <div class="nav-collapse">
            <ul class="nav">
                          <li class="divider-vertical"></li>
                  <li class="active">
                    <a href="/category/articulos.html">
						<i class="icon-folder-open icon-large"></i>Artículos
					</a>
                  </li>

                          <ul class="nav pull-right">
                                <li><a href="/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
    <div style="text-align: center;">
        <img src="static/img/profile-FondoRosa.png" alt="Imagen de perfil" width="128" height="128">
    </div>

<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>
    <li><a href="https://getpelican.com/"><i class="icon-external-link"></i>Pelican</a></li>
    <li><a href="https://www.python.org/"><i class="icon-external-link"></i>Python.org</a></li>
    <li><a href="https://palletsprojects.com/p/jinja/"><i class="icon-external-link"></i>Jinja2</a></li>
    <li><a href="#"><i class="icon-external-link"></i>You can modify those links in your config file</a></li>
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>
<li><a href="/" rel="alternate"><i class="icon-bookmark icon-large"></i>atom feed</a></li>
    <li><a href="#"><i class="icon-You can add links in your config file-sign icon-large"></i>You can add links in your config file</a></li>
    <li><a href="#"><i class="icon-Another social link-sign icon-large"></i>Another social link</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="/category/articulos.html">
    <i class="icon-folder-open icon-large"></i>Artículos
</a>
</li>

Etiquetas:[(<Tag 'Pruebas'>, 4), (<Tag 'forth'>, 4), (<Tag 'nasmjf'>, 4), (<Tag 'Aprender'>, 1)]
<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>
<li class="tag-4">
    <a href="/tag/pruebas.html">
        <i class="icon-tag icon-large"></i>Pruebas
    </a>
</li>
<li class="tag-4">
    <a href="/tag/forth.html">
        <i class="icon-tag icon-large"></i>forth
    </a>
</li>
<li class="tag-4">
    <a href="/tag/nasmjf.html">
        <i class="icon-tag icon-large"></i>nasmjf
    </a>
</li>
<li class="tag-1">
    <a href="/tag/aprender.html">
        <i class="icon-tag icon-large"></i>Aprender
    </a>
</li>


</ul>        </div><!--/.well -->
        
        <div class="span9" id="content">
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to Forth, Descendiendo a las Profundidades">
                                        Forth, Descendiendo a las Profundidades
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2025-11-06T00:00:00-05:00">
        <i class="icon-calendar"></i>jue 06 noviembre 2025
</abbr>
<span class="label">By</span>
<a href="/author/yurizan-peres-fernandez.html"><i class="icon-user"></i>Yurizan Peres Fernandez</a>
<span class="label">Category</span>
<a href="/category/articulos.html"><i class="icon-folder-open"></i>Artículos</a>.


<span class="label">Tags</span>
	<a href="/tag/aprender.html"><i class="icon-tag"></i>Aprender</a>
	<a href="/tag/forth.html"><i class="icon-tag"></i>forth</a>
	<a href="/tag/nasmjf.html"><i class="icon-tag"></i>nasmjf</a>
</footer><!-- /.post-info -->                </div>
                <h2>Que es Forth.</h2>
<p>Es un lenguaje de programación orientado a pila.</p>
<h2>La Implementación.</h2>
<p>Estaremos analizando la portación a i386 NASM realizado por Dave Gauer de la implementación i386 GNU GAS JonesForth por Richard WM Jones. Puedes descargar los fuentes de <a href="https://ratfactor.com/repos/nasmjf" rel="noreferrer noopener" target="_blank">ratfactor.com</a>. Este repositorio contiene las fuentes originales de JonesForth.</p>
<h2>Como funciona Forth</h2>
<p>Más que un lenguaje Forth es un ambiente que integra un interprete, el compilador, el editor y la shell ¡Todo en uno! </p>
<p>En este ambiente el usuario define y corre subrutinas (funciones), a las que se les llama "palabras". Estas "palabras" pueden ser definidas, usadas, probadas, depuradas y redefinidas a medida que el código fuente es ingresado, sin recompilar o reiniciar.</p>
<h3>El paradigma.</h3>
<p>Todo, absolutamente todo en Forth son "palabras". Esto incluye las variables y los operadores básicos. En este articulo se utilizara el termino <code>palabra</code> muchas...muchas veces con los dos significados siguientes:</p>
<ul>
<li><code>palabra</code> -&gt;  Concepto fundamentar en Forth. </li>
<li>palabra -&gt;    concepto gramatical, minima agrupación de caracteres con  significado</li>
</ul>
<h3>La Pila.</h3>
<p>Ya mencionamos que Forth es un lenguaje orientado a la pila ¡tiene dos! La de parámetros y la de retorno. La pil ade retorno se maneja mediante el registro <code>ebp</code> y la de parámetros con el registro <code>esp</code></p>
<p>La implicación más obvia de esto es que no se suelen usar variables como en C o Python, ni registros como en ASM. La segunda implicación del uso de pilas es que tenemos que usar la notación polaca. </p>
<p>Supongamos que queremos sumas dos números "4 + 5".  </p>
<p>En C:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">suma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;La suma de %d y %d es: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">suma</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>En Python:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Programa que suma 4 y 5 y muestra el resultado</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">suma</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;La suma de&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s2">&quot;es:&quot;</span><span class="p">,</span> <span class="n">suma</span><span class="p">)</span>
</code></pre></div>

<p>En Forth:</p>
<div class="highlight"><pre><span></span><code><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">+</span><span class="w"> </span><span class="k">.</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="nf">ok</span>
</code></pre></div>

<p>Expliquemos el código Forth. El literal "4" pone en la pila el valor 4, igual para el 5. El operador "+" toma dos valores del tope te la pila y los suma dejando el resultado en la pila. El operador "." muestra el valor del tope de la pila. El "9" es el resultado mostrado y el "ok" es un indicador de que todo a marchado bien. </p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Los espacios son fundamentales en la sintaxis de Forth. Como en una oración los espacios separan las palabras. Recuerde en Forth todo son "palabras" </p>
</div>
<h3>Entrando en detalles.</h3>
<p>Un sistema Forth se compone de <code>palabras</code>. Son como funciones.: Contienen una serie de instrucciones. Estas instrucciones son, en realidad, una lista de referencias a otras <code>palabras</code>. Así que son palabras de principio a fin. Bueno, en realidad, no ocurre nada realmente útil hasta que se llega a una de las <code>palabras</code> base escritas en código máquina. Estas "palabras clave" son las primitivas de bajo nivel que proporcionan la funcionalidad de "arranque" para todas las demás palabras construidas sobre ellas.</p>
<p>Aunque todo en Forth son "palabras" no todas son iguales. Se pueden encontrar dos tipos de <code>palabra</code>:</p>
<dl>
<dt>Primitivas</dt>
<dd>Son las "palabras" básicas del lenguaje. Estas están implementadas por el interprete/compilador y su cuerpo contiene código maquina.</dd>
<dt>Definidas</dt>
<dd>Ó de usuario. son "palabras" que define el usuario y su cuerpo constituye una lista de punteros a otras <code>palabra</code>. Estas ultimas pueden ser primitivas ó definidas.</dd>
</dl>
<p>Independientemente de que una palabra sea una palabra normal o una palabra de código, tiene la misma estructura básica, todas las palabras tiene un encabezado como el siguiente:</p>
<p><img src="/static/img/CabeceraPalabras.svg" alt="Imagen de cabecera de palabras" class="svgresaltado" /></p>
<p>El cuerpo de una <code>palabra</code> primitiva se ve así.</p>
<p><img src="/static/img/PrimitivasCuerpoPalabras.svg" alt="Imagen del cuerpo de primitiva" class="svgresaltado" /></p>
<p>Lo cual parece extraño e inútil (¿por qué no empezar a ejecutar el código  máquina directamente?) hasta que vemos una <code>palabra</code> definida por el usuario, que no tiene código máquina. Una <code>palabra</code> de usuario se ve así:</p>
<p><img src="/static/img/DefinidasCuerpoPalabras.svg" alt="Cuerpo de una <code>palabra</code> de usuario" class="svgresaltado" /></p>
<p>Lo que las "palabras" primitivas y la definidas por el usuarios tienen en común es  que el primer puntero del cuerpo de ambas apunta al  código máquina que se ejecutará. Para las "Palabras" primitivas sera el código maquina que realiza la acción designada. Para las <code>palabra</code> de usuario sera, en la mayoría de los casos, DOCOL que se conoce como la <em><code>palabra</code> primitiva  intérprete</em>. </p>
<p>El intérprete ejecuta el resto del <code>código</code> de la palabra actual incrementando el puntero de instrucción (esi) y llamando a la macro NEXT. Esto se llama "código enhebrado indirecto" debido al segundo nivel de indirección del puntero. Recuerde el <code>código</code> de una <code>palabra</code> de usuario es una lista de punteros a otras palabras.</p>
<p>Puede ser útil resumir en este punto:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Palabra</th>
<th style="text-align: left;">Comienza con</th>
<th style="text-align: left;">Termina con</th>
<th style="text-align: left;">¿Qué se usa?</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Definida</td>
<td style="text-align: left;">Ptr a DOCOL</td>
<td style="text-align: left;">EXIT ptr</td>
<td style="text-align: left;">esi, memoria principal de datos</td>
</tr>
<tr>
<td style="text-align: left;">Primitiva</td>
<td style="text-align: left;">Ptr a código</td>
<td style="text-align: left;">NEXT macro</td>
<td style="text-align: left;">ebp ("RSP"), pila de Retorno</td>
</tr>
</tbody>
</table>
<p>Además, visualicemos el diseño de una <code>palabra</code> primitiva y una definida por el usuario, una al lado de la otra.:</p>
<p><img src="/static/img/ComparacionCuerpos.svg" alt="Cuerpo de una <code>palabra</code> de usuario" class="svgresaltado" /></p>
<p>En la proxima entrega comenzaremos con el análisis del código. Este articulo y los siguientes comparten la etiqueta #nasmjf </p>
                </div><!-- /.entry-content -->
        </article>
</section>
        </div><!--/span-->       

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is based on <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
      </footer>

    </div><!--/.fluid-container-->




    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/theme/js/jquery-1.7.2.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
  </body>
</html>